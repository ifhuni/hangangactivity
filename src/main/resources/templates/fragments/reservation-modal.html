<!-- fragments/reservation-modal.html -->
<div th:fragment="reservationModal">
  <div class="modal fade" id="reservationModal" tabindex="-1" aria-labelledby="reservationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content rounded-4">
        <div class="modal-header">
          <h5 class="modal-title fw-bold" id="reservationModalLabel">예약하기</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
        </div>
        <div class="modal-body">
          <!-- 선택한 활동 정보 요약 -->
          <div class="border rounded-3 p-3 mb-3 bg-light small">
            <div><strong>활동명:</strong> <span data-field="title">-</span></div>
            <div><strong>위치:</strong> <span data-field="location">-</span></div>
            <div><strong>일시:</strong> <span data-field="date">-</span> <span data-field="time"></span></div>
            <div class="mt-1"><strong>잔여좌석:</strong> <span data-field="left">-</span>명</div>
          </div>

          <form id="reservationForm" novalidate>
            <input type="hidden" id="activityId" name="activityId" value="">
            <input type="hidden" id="availableSeats" value="0">

            <div class="alert alert-danger d-none" data-role="reservation-error"></div>
            <div class="alert alert-success d-none" data-role="reservation-success"></div>

            <div class="mb-3">
              <label for="name" class="form-label">이름</label>
              <input type="text" class="form-control" id="name" required>
            </div>

            <div class="mb-3">
              <label for="passport" class="form-label">여권번호</label>
              <input type="text" class="form-control" id="passport" required>
            </div>

            <div class="mb-3">
              <label for="nationality" class="form-label">국적</label>
              <input type="text" class="form-control" id="nationality" placeholder="예: Korea" required>
            </div>

            <div class="mb-3">
              <label for="birthdate" class="form-label">생년월일</label>
              <input type="date" class="form-control" id="birthdate" required>
            </div>

            <div class="mb-3">
              <label for="gender" class="form-label">성별</label>
              <select class="form-select" id="gender">
                <option value="">선택 안 함</option>
                <option value="M">남성</option>
                <option value="F">여성</option>
                <option value="Other">기타</option>
              </select>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">이메일</label>
              <input type="email" class="form-control" id="email" required>
            </div>

            <div class="mb-3">
              <label for="peopleCount" class="form-label">인원 선택</label>
              <div class="input-group">
                <button class="btn btn-outline-secondary" type="button" id="btnPeopleMinus">-</button>
                <input type="number" class="form-control text-center" id="peopleCount" name="peopleCount" min="1" value="1" required>
                <button class="btn btn-outline-secondary" type="button" id="btnPeoplePlus">+</button>
              </div>
              <div class="form-text">최대 예약 가능 인원: <span data-field="left">-</span>명</div>
            </div>

            <div class="mb-0">
              <label for="specialRequest" class="form-label">요청사항 (선택)</label>
              <textarea class="form-control" id="specialRequest" rows="3" placeholder="알레르기, 준비물 등"></textarea>
            </div>

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
          <button type="submit" form="reservationForm" class="btn btn-primary">예약 완료</button>
        </div>
      </div>
    </div>
  </div>
</div>
